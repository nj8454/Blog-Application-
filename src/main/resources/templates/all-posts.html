<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>My Blog Application</title>
    <style>
        :root { --gap: 24px; --muted:#666; --border:#ddd; }
        body { font-family: system-ui, Arial, sans-serif; margin: 32px; }
        header { display:flex; align-items:center; justify-content:space-between; margin-bottom: 24px; }
        h1 { margin:0; font-size: 36px; }
        .grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--gap);
        }
        .card {
          border: 1px solid var(--border);
          padding: 16px;
          border-radius: 6px;
          background: #fff;
        }
        .meta { color: var(--muted); font-size: 0.9rem; margin: 6px 0 10px; }
        .tags { margin-top: 12px; color:#0a7; }
        .excerpt { margin: 8px 0 0; line-height: 1.4; }
        .card a { color: inherit; text-decoration: none; }
        .card a:hover { text-decoration: underline; }
        .toolbar { display:flex; gap:12px; align-items:center; }
        .toolbar input { padding:8px 10px; width:280px; }
        .toolbar select { padding:8px 10px; }
        .pager { display:flex; justify-content:space-between; margin-top: 24px; color:#333; }
    </style>
</head>
<body>
<header>
    <h1>My Blog Application</h1>
    <div class="toolbar">
        <form th:action="@{/post/search}" method="get" style="display:inline-flex; gap:8px;">
            <input type="search" name="key" placeholder="Search" th:value="${key}"/>
            <button type="submit">Search</button>
        </form>
        <form th:action="@{/post/search/filter" method="get" style="display:inline-flex; gap:4px;"
              th:attr="disabled=${key == null or #strings.isEmpty(key)} ? 'disabled' : null">
            <!-- keep the search term when filtering -->
            <input type="hidden" name="key" th:value="${key}"/>

            <!-- example filter controls -->
            <select name="author"
                    th:attr="disabled=${key == null or #strings.isEmpty(key)} ? 'disabled' : null">
                <option value="">Author (any)</option>
                <option th:each="a : ${authors}" th:value="${a}" th:text="${a}">Author</option>
            </select>

            <input type="datetime-local" name="from"
                   th:attr="disabled=${key == null or #strings.isEmpty(key)} ? 'disabled' : null"/>
            <input type="datetime-local" name="to"
                   th:attr="disabled=${key == null or #strings.isEmpty(key)} ? 'disabled' : null"/>

            <select name="tags" multiple
                    th:attr="disabled=${key == null or #strings.isEmpty(key)} ? 'disabled' : null">
                <option th:each="t : ${allTags}" th:value="${t}" th:text="${t}">tag</option>
            </select>

            <button type="submit"
                    th:attr="disabled=${key == null or #strings.isEmpty(key)} ? 'disabled' : null">
                Apply
            </button>
        </form>
            <select disabled><option>Sort</option></select>
        <a href="#" style="margin-left:12px;">Login</a>
    </div>
</header>

<div class="grid">
    <div th:each="p : ${posts}" class="card">
        <a th:href="@{'/post/' + ${p.id}}">
            <h2 th:text="${p.title}">Title</h2>
        </a>
        <div class="meta">
            <span th:text="${p.author}">Author</span>,
            <span th:text="${#temporals.format(p.createdAt, 'dd/MM/yyyy')}">18/08/2020</span>
        </div>
        <div class="tags" th:if="${p.tags}">
            Tags:
            <span th:text="${#strings.listJoin(p.tags, ', ')}">tag1, tag2</span>
        </div>
        <p class="excerpt" th:text="${p.excerpt}">Short excerpt...</p>
    </div>
</div>

<div class="pager">
    <span>&lt; Previous</span>
    <span>Next &gt;</span>
</div>
</body>
</html>
